function articleAppController(t){t.response=null,t.text=null,t.article=null,t.mode="link",t.setMode=function(o){t.mode=o},t.coloring=null,t.setColoring=function(o){t.coloring=o},t.updateMood=function(o){t.mood=o},t.updateArticle=function(o){t.article=o},t.clear=function(){t.mood=null,t.text=null,t.article=null,t.coloring=null,t.$broadcast("clear")}}function getMoodFactory(t,o,n,e){return function(r,l){var i=o.defer();return n({url:t+l,method:"POST",data:e({text:r})}).then(function(t){i.resolve(t.data)},function(t){i.reject(t)}),i.promise}}function readArticleFactory(t,o,n){return function(e){var r=t.defer();return o({url:n+"/read",method:"GET",headers:{Accept:"text/plain"},params:{url:e},paramSerializer:"$httpParamSerializerJQLike",transformResponse:function(t){return t}}).then(function(t){r.resolve(t.data)},function(t){r.reject(t)}),r.promise}}function textBasedController(t,o,n,e){t.submit=function(){t.loading=!0,o(t.text,"/tone").then(function(n){return t.setColoring(produceToneColoring(n)),o(t.text,"/mood")}).then(function(o){t.updateMood(o.mood),n.hash("mood"),e()})["finally"](function(){t.loading=!1})},t.$on("clear",function(){t.text=null})}function urlBasedController(t,o,n,e,r){t.submit=function(){t.loading=!0,o(t.url).then(function(o){return t.updateArticle(o),n(o,"/tone")}).then(function(o){return t.setColoring(produceToneColoring(o)),n(t.article,"/mood")}).then(function(o){t.updateMood(o.mood),e.hash("mood"),r()})["finally"](function(){t.loading=!1})},t.$on("clear",function(){t.url=null})}function wordColorDirective(){function t(t,o,n){function e(t){for(var n=o.html().split(" "),e=0;e<n.length;e++)n[e]in t.words&&(n[e]='<span style="color: '+t.words[n[e]]+';">'+n[e]+"</span>");o.html(n.join(" "))}t.$watch(n.colorWords,function(t){t&&t.words&&e(t)})}return{link:t}}function setClassAtTopDirective(t){var o=angular.element(t);return{restrict:"A",link:function(t,n,e){var r=e.setClassAtTop,l=n.offset().top,i=!1;o.on("scroll",function(){i||(l=n.offset().top),o.scrollTop()>=l?(n.addClass(r),i=!0):(n.removeClass(r),i=!1)})}}}!function(){var t=angular.module("madeye",["hc.marked","angularSpinner"]);t.config(function(t){t.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded"}),t.value("server","//tone-analyzer-cs252.mybluemix.net"),t.filter("htmlToPlaintext",function(){return function(t){return angular.element(t).text()}}),t.factory("analyze",getMoodFactory),t.factory("readArticle",readArticleFactory),t.controller("article-app",articleAppController),t.controller("text-based",textBasedController),t.controller("url-based",urlBasedController),t.directive("colorWords",wordColorDirective),t.directive("setClassAtTop",setClassAtTopDirective)}();