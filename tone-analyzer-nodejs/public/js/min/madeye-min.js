!function(){function n(n){n.response=null,n.text=null,n.article=null,n.mode="link",n.setMode=function(o){n.mode=o},n.coloring=null,n.setColoring=function(o){n.coloring=o},n.updateMood=function(o){n.mood=o},n.updateArticle=function(o){n.article=o},n.clear=function(){n.mood=null,n.text=null,n.article=null,n.coloring=null,n.$broadcast("clear")}}function o(n,o,t,e){return function(r,l){var i=o.defer();return t({url:n+l,method:"POST",data:e({text:r})}).then(function(n){i.resolve(n.data)},function(n){i.reject(n)}),i.promise}}function t(n,o,t){return function(e){var r=n.defer();return o({url:t+"/read",method:"GET",headers:{Accept:"text/plain"},params:{url:e},paramSerializer:"$httpParamSerializerJQLike",transformResponse:function(n){return n}}).then(function(n){r.resolve(n.data)},function(n){r.reject(n)}),r.promise}}function e(n,o,t,e){n.submit=function(){n.loading=!0,o(n.text,"/tone").then(function(t){return n.setColoring(produceToneColoring(t)),o(n.text,"/mood")}).then(function(o){n.updateMood(o.mood),t.hash("mood"),e()})["finally"](function(){n.loading=!1})},n.$on("clear",function(){n.text=null})}function r(n,o,t,e,r){n.submit=function(){n.loading=!0,o(n.url).then(function(o){return n.updateArticle(o),t(o,"/tone")}).then(function(o){return n.setColoring(produceToneColoring(o)),t(n.article,"/mood")}).then(function(o){n.updateMood(o.mood),e.hash("mood"),r()})["finally"](function(){n.loading=!1})},n.$on("clear",function(){n.url=null})}function l(){function n(n,o,t){function e(n){for(var t=o.html().split(" "),e=0;e<t.length;e++)t[e]in n.words&&(t[e]='<span style="color: '+n.words[t[e]]+';">'+t[e]+"</span>");o.html(t.join(" "))}n.$watch(t.colorWords,function(n){n&&n.words&&e(n)})}return{link:n}}function i(n){var o=angular.element(n);return{restrict:"A",link:function(n,t,e){var r=e.setClassAtTop,l=t.offset().top,i=!1;o.on("scroll",function(){i||(l=t.offset().top),o.scrollTop()>=l?(t.addClass(r),i=!0):(t.removeClass(r),i=!1)})}}}function u(){var u=angular.module("madeye",["hc.marked","angularSpinner"]);u.config(function(n){n.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded"}),u.value("server","//tone-analyzer-cs252.mybluemix.net"),u.factory("analyze",o),u.factory("readArticle",t),u.controller("article-app",n),u.controller("text-based",e),u.controller("url-based",r),u.directive("colorWords",l),u.directive("setClassAtTop",i)}u()}();
//# sourceMappingURL=./madeye-min.js.map